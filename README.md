# Документация API

## Обзор
Этот API позволяет пользователям управлять аккаунтами, объявлениями и комментариями. Он предоставляет эндпоинты для регистрации пользователя, аутентификации, обновления информации о пользователе, управления объявлениями и обработки комментариев.

## Базовый URL
http://localhost:8080


## Аутентификация
Для большинства эндпоинтов требуется аутентификация, и система использует процесс входа, который включает имя пользователя и пароль.

## Эндпоинты

### Пользователи

#### Обновление пароля
`POST /users/set_password`
- Описание: Обновить пароль для аутентифицированного пользователя.
- Тело запроса:
    - `currentPassword`: Текущий пароль (строка, 8-16 символов)
    - `newPassword`: Новый пароль (строка, 8-16 символов)
- Ответы:
    - `200 OK`
    - `401 Unauthorized`
    - `403 Forbidden`

#### Получение информации о текущем пользователе
`GET /users/me`
- Описание: Получить информацию о текущем пользователе.
- Ответы:
    - `200 OK` (Возвращает объект `User`)
    - `401 Unauthorized`

#### Обновление информации о текущем пользователе
`PATCH /users/me`
- Описание: Обновить информацию о текущем пользователе.
- Тело запроса:
    - `firstName`: Имя пользователя (строка, 3-10 символов)
    - `lastName`: Фамилия пользователя (строка, 3-10 символов)
    - `phone`: Номер телефона (строка, формат +7)
- Ответы:
    - `200 OK` (Возвращает обновленный объект `User`)
    - `401 Unauthorized`

#### Обновление аватара текущего пользователя
`PATCH /users/me/image`
- Описание: Обновить аватар для текущего пользователя.
- Тело запроса:
    - `image`: Файл изображения (бинарный)
- Ответы:
    - `200 OK`
    - `401 Unauthorized`

---

### Регистрация

#### Регистрация пользователя
`POST /register`
- Описание: Зарегистрировать нового пользователя.
- Тело запроса:
    - `username`: Имя пользователя (строка, 4-32 символа)
    - `password`: Пароль (строка, 8-16 символов)
    - `firstName`: Имя (строка, 2-16 символов)
    - `lastName`: Фамилия (строка, 2-16 символов)
    - `phone`: Номер телефона пользователя (формат `+7`)
    - `role`: Роль пользователя (`USER`, `ADMIN`)
- Ответы:
    - `201 Created`
    - `400 Bad Request`

---

### Авторизация

#### Авторизация пользователя
`POST /login`
- Описание: Войти в систему с указанными данными.
- Тело запроса:
    - `username`: Имя пользователя (строка, 4-32 символа)
    - `password`: Пароль (строка, 8-16 символов)
- Ответы:
    - `200 OK`
    - `401 Unauthorized`

---

### Объявления

#### Получение всех объявлений
`GET /ads`
- Описание: Получить список всех объявлений.
- Ответы:
    - `200 OK` (Возвращает список объектов `Ad`)

#### Добавление объявления
`POST /ads`
- Описание: Создать новое объявление.
- Тело запроса:
    - `title`: Название объявления (строка, 4-32 символа)
    - `price`: Цена (целое число, 0-10,000,000)
    - `description`: Описание объявления (строка, 8-64 символа)
    - `image`: Файл изображения (бинарный)
- Ответы:
    - `201 Created` (Возвращает созданный объект `Ad`)
    - `401 Unauthorized`

#### Получение комментариев объявления
`GET /ads/{id}/comments`
- Описание: Получить комментарии для конкретного объявления.
- Параметры:
    - `id`: ID объявления (целое число)
- Ответы:
    - `200 OK` (Возвращает список объектов `Comment`)
    - `401 Unauthorized`
    - `404 Not Found`

#### Добавление комментария к объявлению
`POST /ads/{id}/comments`
- Описание: Добавить комментарий к объявлению.
- Параметры:
    - `id`: ID объявления (целое число)
- Тело запроса:
    - `text`: Текст комментария (строка, 8-64 символа)
- Ответы:
    - `200 OK` (Возвращает созданный объект `Comment`)
    - `401 Unauthorized`
    - `404 Not Found`

#### Получение информации об объявлении
`GET /ads/{id}`
- Описание: Получить подробную информацию о конкретном объявлении.
- Параметры:
    - `id`: ID объявления (целое число)
- Ответы:
    - `200 OK` (Возвращает объект `ExtendedAd`)
    - `401 Unauthorized`
    - `404 Not Found`

#### Удаление объявления
`DELETE /ads/{id}`
- Описание: Удалить конкретное объявление.
- Параметры:
    - `id`: ID объявления (целое число)
- Ответы:
    - `204 No Content`
    - `401 Unauthorized`
    - `403 Forbidden`
    - `404 Not Found`

#### Обновление информации об объявлении
`PATCH /ads/{id}`
- Описание: Обновить информацию о конкретном объявлении.
- Параметры:
    - `id`: ID объявления (целое число)
- Тело запроса:
    - `title`: Название объявления (строка, 4-32 символа)
    - `price`: Цена (целое число, 0-10,000,000)
    - `description`: Описание объявления (строка, 8-64 символа)
- Ответы:
    - `200 OK` (Возвращает обновленный объект `Ad`)
    - `401 Unauthorized`
    - `403 Forbidden`
    - `404 Not Found`

---

### Комментарии

#### Удаление комментария
`DELETE /ads/{adId}/comments/{commentId}`
- Описание: Удалить конкретный комментарий из объявления.
- Параметры:
    - `adId`: ID объявления (целое число)
    - `commentId`: ID комментария (целое число)
- Ответы:
    - `200 OK`
    - `403 Forbidden`
    - `401 Unauthorized`
    - `404 Not Found`

#### Обновление комментария
`PATCH /ads/{adId}/comments/{commentId}`
- Описание: Обновить конкретный комментарий к объявлению.
- Параметры:
    - `adId`: ID объявления (целое число)
    - `commentId`: ID комментария (целое число)
- Тело запроса:
    - `text`: Текст комментария (строка, 8-64 символа)
- Ответы:
    - `200 OK` (Возвращает обновленный объект `Comment`)
    - `401 Unauthorized`
    - `403 Forbidden`
    - `404 Not Found`

---

### Мои объявления

#### Получение всех объявлений текущего пользователя
`GET /ads/me`
- Описание: Получить все объявления, опубликованные текущим пользователем.
- Ответы:
    - `200 OK` (Возвращает список объектов `Ad`)
    - `401 Unauthorized`

#### Обновление изображения объявления
`PATCH /ads/{id}/image`
- Описание: Обновить изображение для конкретного объявления.
- Параметры:
    - `id`: ID объявления (целое число)
- Тело запроса:
    - `image`: Файл изображения (бинарный)
- Ответы:
    - `200 OK`
    - `401 Unauthorized`
    - `403 Forbidden`
    - `404 Not Found`

## Схемы

- `NewPassword`: Объект для смены пароля пользователя.
- `Register`: Объект для регистрации пользователя.
- `Login`: Объект для авторизации пользователя.
- `CreateOrUpdateAdDTO`: Объект для создания или обновления объявления.
- `CreateOrUpdateCommentDTO`: Объект для создания или обновления комментария.
- `AdDTO`: Объект, представляющий объявление.
- `CommentDTO`: Объект, представляющий комментарий.
- `UserDTO`: Объект, представляющий пользователя.
- `UpdateUserDTO`: Объект для обновления информации о пользователе.
- `AdsDTO`: Объект, представляющий коллекцию объявлений.
- `ExtendedAdDTO`: Подробная информация о конкретном объявлении.
- `CommentsDTO`: Объект, представляющий коллекцию комментариев.



